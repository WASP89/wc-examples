<template>
  <style>
    p {
      padding: 10px;
      color: red;
    }

    p.digital {
      font-size: 30px;
      color: black;
      border: solid 2px black;
      width: fit-content;
    }
  </style>
  <p class="default-content"></p>
  <p class="time"></p>
</template>

<script>

  (function() {

    var prototype = Object.create(HTMLElement.prototype);

    var templateContent = document.currentScript.ownerDocument.querySelector('template').content;
    
    function onCreatedComponent() {

      var elementContent = this.innerHTML;
      this.innerHTML = "";

      var clone = document.importNode(templateContent, true);

      var defaultContent = clone.querySelector("p.default-content");
      var time = clone.querySelector("p.time");

      defaultContent.innerHTML = elementContent;
      var currentDate = new Date();
      time.innerHTML = currentDate.toString();

      if (this.hasAttribute('type') && this.getAttribute('type') === 'digital') {
        time.classList += ' digital';
        time.innerHTML = currentDate.getHours() + ' : ' + currentDate.getMinutes();
      }

      this.createShadowRoot().appendChild(clone);
    }
    
    prototype.createdCallback = onCreatedComponent;

    document.registerElement('current-date', {
      prototype: prototype
    });

  })()

</script>